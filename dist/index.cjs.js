"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("d3");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}),e.default=t,Object.freeze(e)}var a=n(t),i=r(e),c="treeDiagram-module__container___ul7sf",o="treeDiagram-module__nodeBox___bMi2f",l="treeDiagram-module__hasChildren___NYfIy",d="treeDiagram-module__zoomButtons___IEn09",u="treeDiagram-module__zoomButton___7ssUE",s=function(e){var n=e.data,r=e.initialOpenDepth,s=void 0===r?1:r,f=t.useRef(null),p=t.useRef(null),m=t.useRef(null),v="undefined"!=typeof window&&window.VITEST;t.useEffect(function(){if(n){var t=f.current.parentElement.clientWidth,e=400,r=100,a=t-r-200,c=800-e-40,d=750,u=0,h=i.hierarchy(n);h.y0=c/3,h.x0=0,function t(e,n,r){if(!e.children)return;n>=r?(e._children=e.children,e._children.forEach(function(e){return t(e,n+1,r)}),e.children=null):e.children.forEach(function(e){return t(e,n+1,r)})}(h,0,s);var x=i.select(f.current).attr("viewBox","0 0 ".concat(t," ").concat(800)).attr("preserveAspectRatio","xMidYMid meet");x.selectAll("*").remove();var y=x.append("g");p.current=y;var g=i.zoom().scaleExtent([.5,2]).on("zoom",function(t){y.attr("transform",t.transform)});m.current=g,x.call(g);var _=i.zoomIdentity.translate(r+a,e).scale(.7);v||i.select(f.current).call(g.transform,_);var b=i.tree().nodeSize([120,-280]),w=i.linkHorizontal().x(function(t){return t.y}).y(function(t){return t.x});!function t(e){var n=b(h),r=n.descendants(),a=n.links(),i=y.selectAll("g.node").data(r,function(t){return t.id||(t.id=++u)}),c=i.enter().append("g").attr("class","node").attr("transform",function(t){return"translate(".concat(e.y0,",").concat(e.x0,")")}).on("click",function(e,n){n.children?(n._children=n.children,n.children=null,t(n),E(n)):(n.children=n._children,n._children=null,t(n),E(n))});c.append("foreignObject").attr("x",-190).attr("y",function(t){return t.data.stage?-35:-18.5}).attr("width",190).attr("height",120).append("xhtml:div").attr("class",function(t){return"".concat(o," ").concat(t._children||t.children?l:"")}).html(function(t){return'<div  style="display:flex"  >\n              \n            <div style="width:100%" >\n            '.concat(t.data.stage?'<div \n              style="background-color:white;border-radius:0px 6px 0px 0px;padding:5px" \n              >\n              '.concat(t.data.stage,"\n              </div>"):"<div></div>",'\n            <div \n            style="margin-top:').concat(t.data.stage?"5px":"0px",';padding:5px" \n            >\n            ').concat(t.data.name,"\n            </div>\n            </div>\n            ").concat(t.data.percent?'<div style="width:50%;background-color:white;display:flex;align-items:center;justify-content:center;border-radius:6px 0px 0px 6px;border-right:solid 1px var(--adl-yellow)" >'.concat(t.data.percent+"%","</div>"):"<div></div>","\n            </div>")}),c.merge(i).transition().duration(d).attr("transform",function(t){return"translate(".concat(t.y,",").concat(t.x,")")}),i.exit().transition().duration(d).attr("transform",function(t){return"translate(".concat(e.y,",").concat(e.x,")")}).remove();var s=y.selectAll("path.link").data(a,function(t){return t.target.id});s.enter().insert("path","g").attr("class","link").attr("fill","none").attr("stroke","black").attr("stroke-width","1px").attr("d",function(t){var n={x:e.x0,y:e.y0};return w({source:n,target:n})}).merge(s).transition().duration(d).attr("d",w),s.exit().transition().duration(d).attr("d",function(t){var n={x:e.x,y:e.y};return w({source:n,target:n})}).remove(),r.forEach(function(t){t.x0=t.x,t.y0=t.y})}(h)}function E(t){var e,n=window.innerWidth<768,r=n?1:1.2,a=f.current.getBoundingClientRect(),c=a.width,o=a.height,l=t.y,u=t.x,s=n?[c/.8-l*r,o/2-u*r]:[c/2-l*r,o/2-u*r];i.select(f.current).transition().duration(d).call(m.current.transform,(e=i.zoomIdentity).translate.apply(e,s).scale(r))}},[n,s]);return a.default.createElement("div",{style:{position:"relative"}},a.default.createElement("svg",{ref:f,className:c}),a.default.createElement("div",{className:d},a.default.createElement("button",{className:u,onClick:function(){m.current&&f.current&&i.select(f.current).transition().call(m.current.scaleBy,1.2)}},"+"),a.default.createElement("button",{className:u,onClick:function(){m.current&&f.current&&i.select(f.current).transition().call(m.current.scaleBy,.8)}},"âˆ’")))};exports.TreeDiagram=s,exports.default=s;
//# sourceMappingURL=index.cjs.js.map
